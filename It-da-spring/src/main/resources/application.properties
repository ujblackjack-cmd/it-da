spring.application.name=It-da

# ========================================
# ????? Application Properties
# Spring Boot 3.x ??
# ========================================

# ========================================
# ?? ??
# ========================================
server.port=8080
server.servlet.context-path=/
spring.servlet.encoding.charset=UTF-8
spring.servlet.encoding.enabled=true
spring.servlet.encoding.force=true

# ========================================
# ?????? ?? (MySQL 8.x)
# ========================================
spring.datasource.url=jdbc:mysql://localhost:3306/itda?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=password
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ??? ? ?? (HikariCP)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ========================================
# JPA/Hibernate ??
# ========================================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# ========================================
# Redis ?? (?? ???)
# ========================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.timeout=3000ms
spring.data.redis.lettuce.pool.max-active=10
spring.data.redis.lettuce.pool.max-idle=10
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=-1ms

# ========================================
# ?? ??
# ========================================
# ?? ???? (1??)
server.servlet.session.timeout=3600s
# ?? ?? ??
server.servlet.session.cookie.name=SESSION_ID
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.cookie.path=/
# ?? ?? ??
spring.session.store-type=redis
spring.session.data.redis.namespace=itda:session

# ========================================
# Security ??
# ========================================
# CSRF ??
spring.security.csrf.cookie.name=XSRF-TOKEN
spring.security.csrf.header.name=X-XSRF-TOKEN

# ========================================
# ?? ??? ??
# ========================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
spring.servlet.multipart.file-size-threshold=1MB

# ========================================
# OAuth2 ?? ??? ??
# ========================================
# ???
spring.security.oauth2.client.registration.kakao.client-id=${KAKAO_CLIENT_ID}
spring.security.oauth2.client.registration.kakao.client-secret=${KAKAO_CLIENT_SECRET}
spring.security.oauth2.client.registration.kakao.redirect-uri={baseUrl}/login/oauth2/code/kakao
spring.security.oauth2.client.registration.kakao.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.kakao.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.kakao.scope=profile_nickname,account_email

spring.security.oauth2.client.provider.kakao.authorization-uri=https://kauth.kakao.com/oauth/authorize
spring.security.oauth2.client.provider.kakao.token-uri=https://kauth.kakao.com/oauth/token
spring.security.oauth2.client.provider.kakao.user-info-uri=https://kapi.kakao.com/v2/user/me
spring.security.oauth2.client.provider.kakao.user-name-attribute=id

# ???
spring.security.oauth2.client.registration.naver.client-id=${NAVER_CLIENT_ID}
spring.security.oauth2.client.registration.naver.client-secret=${NAVER_CLIENT_SECRET}
spring.security.oauth2.client.registration.naver.redirect-uri={baseUrl}/login/oauth2/code/naver
spring.security.oauth2.client.registration.naver.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.naver.scope=name,email

spring.security.oauth2.client.provider.naver.authorization-uri=https://nid.naver.com/oauth2.0/authorize
spring.security.oauth2.client.provider.naver.token-uri=https://nid.naver.com/oauth2.0/token
spring.security.oauth2.client.provider.naver.user-info-uri=https://openapi.naver.com/v1/nid/me
spring.security.oauth2.client.provider.naver.user-name-attribute=response

# ??
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.redirect-uri={baseUrl}/login/oauth2/code/google
spring.security.oauth2.client.registration.google.scope=profile,email

# ========================================
# ?? ??
# ========================================
logging.level.root=INFO
logging.level.com.hobbymate=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ?? ??
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ?? ?? ??
logging.file.name=logs/hobbymate.log
logging.file.max-size=10MB
logging.file.max-history=30

# ========================================
# Swagger/OpenAPI ??
# ========================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.operations-sorter=alpha
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.default-models-expand-depth=1
springdoc.swagger-ui.default-model-expand-depth=1

# ========================================
# AWS S3 ?? (??? ???)
# ========================================
cloud.aws.credentials.access-key=${AWS_ACCESS_KEY}
cloud.aws.credentials.secret-key=${AWS_SECRET_KEY}
cloud.aws.s3.bucket=hobbymate-images
cloud.aws.region.static=ap-northeast-2
cloud.aws.stack.auto=false

# ========================================
# ???? API ??
# ========================================
kakao.map.api-key=${KAKAO_MAP_API_KEY}
kakao.map.rest-api-key=${KAKAO_MAP_REST_API_KEY}

# ========================================
# AI ?? ?? (Python FastAPI)
# ========================================
ai.server.url=http://localhost:8000
ai.server.timeout=30000
ai.server.connect-timeout=5000

# SVD ?? API
ai.server.endpoint.svd=/api/recommend/svd
# LightGBM ?? API
ai.server.endpoint.lightgbm=/api/recommend/lightgbm
# GPT-4 ?? API
ai.server.endpoint.gpt4=/api/recommend/gpt4
# ?? ?? API (KcELECTRA)
ai.server.endpoint.sentiment=/api/sentiment/analyze

# ========================================
# WebSocket ??
# ========================================
spring.websocket.allowed-origins=http://localhost:3000,https://hobbymate.com
spring.websocket.message-size-limit=8192
spring.websocket.send-time-limit=20000
spring.websocket.send-buffer-size-limit=524288

# ========================================
# Jackson ?? (JSON ???)
# ========================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.default-property-inclusion=non_null

# ========================================
# ??? ?? (SMTP)
# ========================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_USERNAME}
spring.mail.password=${EMAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.timeout=5000

# ========================================
# ??/???? ??
# ========================================
spring.task.scheduling.pool.size=5
spring.task.execution.pool.core-size=10
spring.task.execution.pool.max-size=20
spring.task.execution.pool.queue-capacity=100

# ========================================
# ????? ?? (????)
# ========================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# ========================================
# ??? ??
# ========================================
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Seoul
spring.jackson.time-zone=Asia/Seoul

# ========================================
# ??? ?? ??
# ========================================
spring.data.web.pageable.default-page-size=20
spring.data.web.pageable.max-page-size=100
spring.data.web.pageable.one-indexed-parameters=false

# ========================================
# CORS ??
# ========================================
cors.allowed-origins=http://localhost:3000,https://hobbymate.com
cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=3600

# ========================================
# ????? ??
# ========================================
# ?? ???? (local/dev/prod)
spring.profiles.active=local

# ========================================
# ?? ?? ?? (DevTools)
# ========================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ========================================
# ?? ??
# ========================================
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.cache-null-values=false

# ========================================
# ?? ??? ?? (???)
# ========================================
badge.check.enabled=true
badge.check.cron=0 0 2 * * *
badge.initial-count=125

# ========================================
# ?? ?? (???)
# ========================================
notification.enabled=true
notification.batch-size=100
notification.retry-count=3

# ========================================
# ?? ?? ?? (???)
# ========================================
distance.unit=km
distance.max-radius=50